p8105_hw5_mff2137
================
Mohammad Fouda

## Problem 2

### Read in the data

First, we read in the `homicide-data` and create a `city-state` variable

``` r
homicide <-
  read_csv("data/homicide-data.csv") %>% 
  mutate(city_state = str_c(city, ", ", state)) 
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Description

The `homicide` dataset has data on criminal homicides over a decade in
50 of the largest American cities with each row representing a homicide.
It has 13 variables and 52179 observations. Variables include identifier
of each homicide, date reported, victim information (name, sex, race,
age), the city and state where it happened, specific coordinates of the
incident, and the disposition of each case (e.g. closed by arrest,
closed without arrest, open/no arrest).

### Clean and tidy data

In this step, we summarize across cities to obtain the total number of
homicides and the an the number of unsolved homicides. The total number
of homicides in Baltimore, MD is 2827.

``` r
balt_total <-
  homicide %>% 
  filter(city_state == "Baltimore, MD") %>% 
  group_by(city_state) %>% 
  summarize(total = n()) 
```

To obtain the number of unsolved homicides, we summarize by `city-state`
and `disposition`, then combine the number of homicides of which
disposition is “Closed without arrest” or “Open/No arrest”. The number
of unsolved homicides in Baltiomre, MD is 1825

``` r
balt_open <-
  homicide %>% 
  filter(city_state == "Baltimore, MD", disposition %in% c("Closed without arrest", "Open/No arrest")) %>%
  group_by(city_state) %>% 
  summarize(unresolved = n()) 
```

This step produces a data frame with counts of both unresolved and total
homicides in Baltimore

``` r
balt_df <-
  inner_join(balt_open, balt_total)
```

    ## Joining, by = "city_state"

## Baltimore `prop.test`

To estimate the proportion of unresolved homicides in Baltimore, MD, we
use the `prop.test` . The resulting proportion is 0.646 and the 95%
confidence interval is 0.628, 0.663

``` r
balt_test <-
  prop.test(1825, 2827) %>% 
  broom::tidy() %>% 
  select(estimate, starts_with("conf"))

balt_test
```

    ## # A tibble: 1 × 3
    ##   estimate conf.low conf.high
    ##      <dbl>    <dbl>     <dbl>
    ## 1    0.646    0.628     0.663

Another way, same result…

``` r
prop_balt <-
  prop.test(
    x = balt_df %>% pull(unresolved),
    n = balt_df %>% pull(total),
    alternative = c("t"),
    conf.level = 0.95, correct = TRUE) %>% 
  broom::tidy() %>% 
  select(estimate, starts_with("conf"))

prop_balt
```

    ## # A tibble: 1 × 3
    ##   estimate conf.low conf.high
    ##      <dbl>    <dbl>     <dbl>
    ## 1    0.646    0.628     0.663
